name: "Sign Up Flow - Personal Account - iOS Specific"
description: "iOS-specific signup flow with platform-specific elements and behaviors"
tags:
  - feature:auth
  - test-type:happy-path
  - priority:p1
  - component:signup
  - owner:auth-team
  - platform:ios
env:
  FIRST_NAME: "Hellen"
  LAST_NAME: "Johnson"
  PASSWORD: "12345Aa@"
  STATE: "Alaska"
  PASSCODE: "0"
appId: ${APP_ID}
---
- launchApp:
    appId: "${APP_ID}"
    clearState: true
- tapOn:
    point: 50%,27%
- tapOn:
    point: 50%,27%
- tapOn:
    point: 50%,27%
- tapOn: "Get started"
- tapOn: Sign Up
- tapOn: Personal
- runScript: ../../../../scripts/generate_phone.js
- tapOn:
    id: edtPhoneNumber
- inputText: "${output.generatedPhone}"
- copyTextFrom:
    id: edtPhoneNumber
- tapOn:
    id: btnContinue
- runScript:
    file: ../../../../scripts/sms-helper.js
    env:
      PHONE_NUMBER: "${output.generatedPhone}"
- inputText: ${output.otp}
- tapOn:
    id: edtEmail
- inputRandomEmail
- tapOn: Continue
- tapOn:
    id: edtSignUpPassword
- inputText: "${PASSWORD}"
- tapOn: Continue
- tapOn:
    id: edtSignUpFirstName
- inputText: "${FIRST_NAME}"
- tapOn:
    id: edtSignUpLastName
- inputText: "${LAST_NAME}"
- tapOn: Continue
- tapOn: Continue
- inputText: "5396 North Reese Avenue"
- tapOn:
    id: ic_suggested_add
- tapOn: "State"
- tapOn: Alaska
- tapOn: Continue
- swipe:
    from:
      text: "2007"
    direction: DOWN
- tapOn: Continue
- tapOn: Continue without a referral code

- assertVisible: Done

- tapOn:
    text: "${PASSCODE}"
    repeat: 6
    delay: 500

- tapOn:
    text: "${PASSCODE}"
    repeat: 6
    delay: 500

- runFlow:
    when:
      visible: "Allow Biometric ID?"
    commands:
      - tapOn: Do it later

- tapOn: Continue
- tapOn: Do it later

- runFlow:
    when:
      visible: "Failed to create chat user.*"
    commands:
      - tapOn: Cancel

- runFlow:
    when:
      visible:
        id: ic_close_banner
    commands:
      - tapOn:
          id: ic_close_banner

- assertVisible: ACCOUNT
- assertVisible: Add money

- tapOn: ic circle setting
- scrollUntilVisible:
    element: Log out
- tapOn: "Log out"
- tapOn: "OK"
- assertVisible: "WELCOME TO FASTERPAY"
